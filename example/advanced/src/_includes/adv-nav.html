<nav class="u-nav" data-component="navbar">
    <div class="u-nav__inner">
        <div class="u-nav__section u-nav__section--brand">
            <div data-slot="brand">Brand</div>
        </div>

        <button class="u-nav__toggle" aria-expanded="false" aria-controls="u-nav-menu">
            <span class="u-nav__sr">Menu</span>
            <svg aria-hidden="true" viewBox="0 0 24 24" class="u-nav__icon">
                <path d="M3 6h18M3 12h18M3 18h18" />
            </svg>
        </button>

        <div id="u-nav-menu" class="u-nav__menu" data-state="closed">
            <div class="u-nav__section u-nav__section--links">
                <ul data-slot="links" role="list">
                    <li><a href="/docs/">Docs</a></li>
                    <li><a href="/recipes/">Recipes</a></li>
                    <li><a href="/blog/">Blog</a></li>
                </ul>
            </div>
            <div class="u-nav__section u-nav__section--actions">
                <div data-slot="actions">
                    <a class="u-btn" href="/start/">Get Started</a>
                </div>
            </div>
        </div>
    </div>
</nav>
<script>
    // ESM behavior for the navbar component
    // - Toggles menu open/closed
    // - Manages aria-expanded
    // - Closes on Escape and when clicking outside

    const root = document.currentScript?.closest('.u-nav') || document.querySelector('.u-nav');
    if (root) {
        const toggle = root.querySelector('.u-nav__toggle');
        const menu = root.querySelector('#u-nav-menu');

        const open = () => {
            menu.dataset.state = 'open';
            toggle.setAttribute('aria-expanded', 'true');
            document.addEventListener('keydown', onKeydown);
            document.addEventListener('click', onDocClick, { capture: true });
        };

        const close = () => {
            menu.dataset.state = 'closed';
            toggle.setAttribute('aria-expanded', 'false');
            document.removeEventListener('keydown', onKeydown);
            document.removeEventListener('click', onDocClick, { capture: true });
        };

        const onKeydown = (e) => {
            if (e.key === 'Escape') close();
        };

        const onDocClick = (e) => {
            if (!root.contains(e.target)) close();
        };

        toggle?.addEventListener('click', () => {
            (menu.dataset.state === 'open') ? close() : open();
        });
    }
</script>
<style>
    :root {
        --u-nav-bg: var(--surface-0, #fff);
        --u-nav-fg: var(--text-0, #111);
        --u-nav-border: color-mix(in oklab, var(--u-nav-fg) 12%, transparent);
        --u-nav-gap: 1rem;
        --u-nav-max: 72rem;
    }

    @scope(.u-nav) {
        a{
            color: red;
        }
        .u-nav {
            position: sticky;
            top: 0;
            inset-inline: 0;
            background: var(--u-nav-bg);
            color: var(--u-nav-fg);
            border-bottom: 1px solid var(--u-nav-border);
            z-index: 50;
        }

        .u-nav__inner {
            max-width: var(--u-nav-max);
            margin-inline: auto;
            padding: .75rem 1rem;
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
            gap: var(--u-nav-gap);
        }

        .u-nav__section--brand {
            display: flex;
            align-items: center;
            min-width: 0;
        }

        .u-nav__brand-link {
            font-weight: 700;
            text-decoration: none;
            color: inherit;
        }

        .u-nav__toggle {
            border: 0;
            background: none;
            padding: .5rem;
            cursor: pointer;
            border-radius: .5rem;
        }

        .u-nav__toggle:focus-visible {
            outline: 2px solid;
            outline-offset: 2px;
        }

        .u-nav__icon {
            width: 1.5rem;
            height: 1.5rem;
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
        }

        .u-nav__sr {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .u-nav__menu {
            display: contents;
        }

        .u-nav__section--links,
        .u-nav__section--actions {
            display: none;
        }

        .u-nav__list {
            display: grid;
            gap: .5rem;
            padding: 0;
            margin: 0;
        }

        .u-nav__list>li {
            list-style: none;
        }

        .u-nav__list a {
            text-decoration: none;
            color: inherit;
            padding: .5rem .75rem;
            border-radius: .5rem;
        }

        .u-nav__list a:focus-visible {
            outline: 2px solid;
            outline-offset: 2px;
        }

        /* Open state (mobile) */
        [data-state="open"] .u-nav__section--links,
        [data-state="open"] .u-nav__section--actions {
            display: grid;
        }

        /* â‰¥ 768px layout via container queries on the component root */
        @container (min-width: 768px) {
            .u-nav__inner {
                grid-template-columns: auto 1fr auto;
            }

            .u-nav__toggle {
                display: none;
            }

            .u-nav__menu {
                display: grid;
                grid-template-columns: 1fr auto;
                align-items: center;
                gap: var(--u-nav-gap);
            }

            .u-nav__section--links,
            .u-nav__section--actions {
                display: contents;
            }

            .u-nav__list {
                grid-auto-flow: column;
            }
        }


        /* Opt-in container for responsive behavior */
        .u-nav {
            container-type: inline-size;
        }

        @media (prefers-reduced-motion: reduce) {

            .u-nav__menu *,
            .u-nav__toggle {
                transition: none !important;
            }
        }
    }
</style>